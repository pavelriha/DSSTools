<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">

<div class="error" *ngIf="init_error">
  <h3>Bohužel došlo k chybě při stahování dat</h3>
  {{ errorMsg }}
</div>

<div [class]="TableConfig.mdWrapperClass" *ngIf="data">
  <form name="detailform" #editform="ngForm"  (ngSubmit)="onSubmit()" > <!-- (keyup.enter)="onSubmit()" ted to zase funguje i bez toho -->
    <table [class]="TableConfig.mdTableClass" [class.table-striped]="!edit" [class.bg-hilight]="edit" [class.edit]="edit">
      <tbody>
        <tr *ngFor="let c of columns">
          <th class="text-nowrap">
              {{ c.title?c.title:c.name }}
              <span *ngIf="edit && dataDescription.properties[c.name]?.required" class="required">*</span>
          </th>
          <td class="text-nowrap">
              <mad-table-cell [item]="c" [data]="data" [desc]="dataDescription" [conf]="TableConfig" [edit]="TableConfig.readonlyCollumns?.includes(c.name)?false:edit"></mad-table-cell>
        </td>
        </tr>
        <tr *ngIf="formtype">
          <th></th>
          <td>
            <ng-container *ngIf="!edit">
              <button type=button (click)="editStart()" class="btn btn-dark btn-sm btn--icon-text"><i class="zmdi zmdi-edit"></i>EDIT</button>
            </ng-container>
            <ng-container *ngIf="edit">
              <div *ngIf="editform.touched && editform.invalid" class="alert alert-danger">Formulář není vyplněn správně</div>
              <div *ngIf="errorMsg" class="alert alert-danger">{{ errorMsg }}</div>

              <button type=submit class="btn btn-success btn--icon-text">
                <i class="zmdi zmdi-check"></i>{{TableConfig.mdLabelSubmit??'SUBMIT'}}
              </button>
                &nbsp; 
              <button type=button (click)="editCancel()" class="btn btn-danger btn--icon-text"><i class="zmdi zmdi-close"></i>{{TableConfig.mdLabelCancel??'CANCEL'}}</button>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div>
